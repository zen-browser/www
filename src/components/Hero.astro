---
import Title from '../components/Title.astro'
import Description from '../components/Description.astro'
import Button from '../components/Button.astro'
import { Image } from 'astro:assets'
import HomePageVideo from '../assets/HomePageVideo.webm'
import { ArrowRight } from 'lucide-astro'
import { motion } from 'motion/react'
import { getTitleAnimation } from '../animations'
import Video from './Video.astro'

let titleAnimationCounter = 0
function getNewAnimationDelay() {
  titleAnimationCounter++
  return titleAnimationCounter * 0.15
}

function getHeroTitleAnimation() {
  return getTitleAnimation(getNewAnimationDelay())
}
---

<header
  id="header"
  class="flex w-full flex-col items-center gap-[20%] py-32 text-center lg:gap-[25%]"
>
  <div class="flex h-full flex-col items-center justify-center">
    <Title
      class="relative px-12 text-center !font-normal leading-[108px] md:!text-7xl lg:px-0 lg:!text-9xl"
    >
      <motion.span client:load {...getHeroTitleAnimation()}>
        welcome
      </motion.span>
      <motion.span client:load {...getHeroTitleAnimation()}> to </motion.span>
      <br class="hidden md:block" />
      <motion.span client:load {...getHeroTitleAnimation()}> a </motion.span>
      <motion.span
        client:load
        {...getHeroTitleAnimation()}
        className="italic text-coral"
      >
        calmer
      </motion.span>
      <motion.span client:load {...getHeroTitleAnimation()}>
        internet
      </motion.span>
    </Title>
    <motion.span client:load {...getHeroTitleAnimation()}>
      <Description class="px-12 text-center lg:px-0"
        >Beautifully designed, privacy-focused, and packed with features. <br
          class="hidden md:block"
        />We care about your experience, not your data.</Description
      >
    </motion.span>
    <div class="mt-6 flex w-2/3 flex-col gap-3 sm:gap-6 md:w-fit md:flex-row">
      <motion.span client:load {...getHeroTitleAnimation()}>
        <Button class="w-full" href="/download" isPrimary>
          Beta is now available!
          <ArrowRight class="size-4" />
        </Button>
      </motion.span>
      <motion.span client:load {...getHeroTitleAnimation()}>
        <Button href="#Features">Explore Zen</Button>
      </motion.span>
    </div>
  </div>
</header>
<motion.span
  className="flex max-w-full px-8 lg:max-w-none lg:flex-none lg:px-0"
  client:load
  {...getHeroTitleAnimation()}
>
  <Video
    src={HomePageVideo}
    autoplay
    loop
    muted
    playsinline
    preload="none"
    class="mb-24 rounded-3xl shadow-md lg:mx-auto lg:w-3/4 dark:opacity-80"
  />
</motion.span>
