---
import Title from '../components/Title.astro'
import Description from '../components/Description.astro'
import Button from '../components/Button.astro'
import { Image } from 'astro:assets'
import myImage from '../assets/browsers.png'
import { ArrowRight } from 'lucide-astro'
import { motion } from 'motion/react'
import { getTitleAnimation } from '../animations'

let titleAnimationCounter = 0
function getNewAnimationDelay() {
  titleAnimationCounter++
  return titleAnimationCounter * 0.15
}

function getHeroTitleAnimation() {
  return getTitleAnimation(getNewAnimationDelay())
}
---

<header
  id="header"
  class="flex w-full flex-col items-center gap-[20%] py-32 pb-16 text-center md:pb-32 lg:gap-[15%] lg:pb-16"
>
  <div class="flex h-full flex-col items-center justify-center">
    <motion.a
      href="/download"
      className="transition-bg mb-10 flex items-center gap-2 rounded-full border-2 border-dark bg-dark px-2 py-0 py-1 text-sm text-paper shadow-sm hover:bg-paper hover:text-dark hover:duration-200 md:px-4"
      client:load
      {...getTitleAnimation(1.8)}
    >
      <div>Beta is now available!</div>
      <ArrowRight class="size-4" />
    </motion.a>
    <Title
      class="relative px-12 text-left !font-normal leading-[108px] md:text-center md:!text-7xl lg:px-0 lg:!text-9xl"
    >
      <motion.span client:load {...getHeroTitleAnimation()}>
        Welcome
      </motion.span>
      <motion.span client:load {...getHeroTitleAnimation()}> to </motion.span>
      <br class="hidden md:block" />
      <motion.span client:load {...getHeroTitleAnimation()}> a </motion.span>
      <motion.span
        client:load
        {...getHeroTitleAnimation()}
        className="italic text-coral"
      >
        calmer
      </motion.span>
      <motion.span client:load {...getHeroTitleAnimation()}>
        internet
      </motion.span>
    </Title>
    <motion.span client:load {...getHeroTitleAnimation()}>
      <Description class="px-12 text-left md:text-center lg:px-0"
        >Beautifully designed, privacy-focused, and packed with features.<br
        />We care about your experience, not your data.</Description
      >
    </motion.span>
    <div class="mt-6 flex w-2/3 flex-col gap-3 sm:gap-6 md:w-fit md:flex-row">
      <motion.span client:load {...getHeroTitleAnimation()}>
        <Button class="w-full" href="/download" isPrimary>
          Download
          <ArrowRight class="size-4" />
        </Button>
      </motion.span>
      <motion.span client:load {...getHeroTitleAnimation()}>
        <Button href="#features">Start Exploring</Button>
      </motion.span>
    </div>
  </div>
</header>
<motion.span client:load {...getHeroTitleAnimation()}>
  <Image
    src={myImage}
    alt="Zen browser"
    class="mx-auto mb-24"
    loading="eager"
  />
</motion.span>
