---
import Title from '../components/Title.astro'
import Description from '../components/Description.astro'
import Button from '../components/Button.astro'
import { Image } from 'astro:assets'
import myImage from '../assets/browsers.png'
import { ArrowRight } from 'lucide-astro';
import { motion } from 'motion/react';
import { getTitleAnimation } from '../animations'

let titleAnimationCounter = 0;
function getNewAnimationDelay() {
  titleAnimationCounter++;
  return titleAnimationCounter * 0.15;
}

function getHeroTitleAnimation() {
  return getTitleAnimation(getNewAnimationDelay());
}

---

<header
  id="header"
  class="flex py-32 md:pt-56 md:pb-42 w-full flex-col items-center text-center gap-[20%] lg:gap-[15%]"
>
  <div class="flex flex-col items-center h-full justify-center">
    <motion.a href='/download' className="rounded-full py-0 px-2 py-1 md:px-4 bg-dark mb-10 items-center text-paper text-sm shadow-sm flex gap-2 hover:bg-paper hover:text-dark border-2 border-dark transition-bg hover:duration-200" client:load {...getTitleAnimation(1.8)}>
      <div>
        Beta is now available!
      </div>
      <ArrowRight class="size-4" />
    </motion.a>
    <Title class='relative text-left px-12 lg:px-0 md:text-center leading-[108px] md:!text-7xl lg:!text-9xl !font-normal'>
      <motion.span client:load {...getHeroTitleAnimation()}>
        Welcome
      </motion.span>
      <motion.span client:load {...getHeroTitleAnimation()}>
        to
      </motion.span>
      <br class="hidden md:block" /> 
      <motion.span client:load {...getHeroTitleAnimation()}>
        a
      </motion.span>
      <motion.span client:load {...getHeroTitleAnimation()} className='italic'>
        calmer
      </motion.span>
      <motion.span client:load {...getHeroTitleAnimation()}>
        internet
      </motion.span>
    </Title>
    <motion.span client:load {...getHeroTitleAnimation()}>
      <Description class='text-left px-12 lg:px-0 md:text-center'
        >Beautifully designed, privacy-focused, and packed with features.<br
        />We care about your experience, not your data.</Description
      >
    </motion.span>
    <div class="w-2/3 md:w-fit mt-6 gap-3 sm:gap-6 flex flex-col md:flex-row">
      <motion.span client:load {...getHeroTitleAnimation()}>
        <Button class="w-full" href="/download" isPrimary>
          Download
          <ArrowRight class="size-4" />
        </Button>
      </motion.span>
      <motion.span client:load {...getHeroTitleAnimation()}>
        <Button href="#features">Start Exploring</Button>
      </motion.span>
    </div>
  </div>
</header>
<motion.span client:load {...getHeroTitleAnimation()}>
  <Image src={myImage} alt="Zen browser" class="mx-auto mb-24" loading="eager" />
</motion.span>