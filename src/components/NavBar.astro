---
import { Astronav, MenuItems } from 'astro-navbar'
import DiscordIcon from '~/icons/DiscordIcon.astro'
import GitHubIcon from '~/icons/GitHubIcon.astro'
import MenuIcon from '~/icons/MenuIcon.astro'
import { getLocale, getPath, getUI } from '~/utils/i18n'
import Logo from './Logo.astro'
import MobileMenu from './MobileMenu.astro'
import ThemeSwitch from './ThemeSwitch.astro'

const locale = getLocale(Astro)
const getLocalePath = getPath(locale)
const {
  components: {
    nav: { brand, menu },
  },
} = getUI(locale)
---

<!-- Desktop Navigation -->
<Astronav>
  <MenuItems
    class="container relative z-20 grid w-full grid-cols-2 items-center gap-2 bg-paper py-3 lg:grid lg:grid-cols-[auto_1fr_auto] lg:py-6"
  >
    <a class="flex items-center gap-2 text-lg font-bold" href={getLocalePath('/')}>
      <Logo class="text-coral" />
      <span>{brand}</span>
    </a>
    <nav
      class="hidden items-center gap-6 place-self-center text-xs sm:text-sm lg:flex lg:text-base"
    >
      <a
        class="font-medium transition-colors duration-200 hover:text-coral"
        href="https://docs.zen-browser.app"
      >
        {menu.documentation}
      </a>
      <a
        class="font-medium transition-colors duration-200 hover:text-coral"
        href={getLocalePath('/mods')}
      >
        {menu.mods}
      </a>
      <a
        class="font-medium transition-colors duration-200 hover:text-coral"
        href={getLocalePath('/release-notes')}
      >
        {menu.releaseNotes}
      </a>
      <a
        class="font-medium transition-colors duration-200 hover:text-coral"
        href={getLocalePath('/about')}
      >
        {menu.aboutUs}
      </a>
    </nav>
    <div class="flex items-center gap-3 place-self-end lg:gap-4">
      <div class="hidden gap-4 lg:flex">
        <a
          href="https://github.com/zen-browser"
          target="_blank"
          aria-label="Visit Zen Browser on GitHub"
          class="text-dark opacity-80 transition-opacity hover:opacity-100"
        >
          <GitHubIcon class="size-5" />
        </a>
        <a
          href="https://discord.gg/zen-browser"
          target="_blank"
          aria-label="Join Zen Browser on Discord"
          class="text-dark opacity-80 transition-opacity hover:opacity-100"
        >
          <DiscordIcon class="size-5" />
        </a>
      </div>
      <div id="theme-switcher">
        <ThemeSwitch label="Toggle theme" />
      </div>
      {/* eslint-disable-next-line jsx-a11y/label-has-associated-control */}
      <label
        for="mobile-menu-toggle"
        class="cursor-pointer p-2 text-dark lg:hidden"
        aria-label="Open menu"
      >
        <MenuIcon class="h-6 w-6" />
      </label>
    </div>
  </MenuItems>
</Astronav>

<!-- Mobile Hamburger Menu Content -->
<MobileMenu />

<style is:global>
  #theme-switcher * {
    @apply text-dark;
  }
</style>
